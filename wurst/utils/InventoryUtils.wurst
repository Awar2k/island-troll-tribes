package InventoryUtils
import UnitExtensions

public function transferItems(unit source, unit dest)
    var emptySlots = dest.freeSlots()
    let count = source.inventorySize()
    for i = 0 to count - 1
        if emptySlots == 0
            break
        let grabbed = source.itemInSlot(i)
        if grabbed != null
            dest.addItemHandle(grabbed)
            emptySlots -= 1

public function unit.transferItems(unit dest)
    transferItems(this, dest)
